import grpc from "grpc";
import { injectable } from "inversify";
import "reflect-metadata";
import { IContext } from "../server/interface/IContext";
import { Get{{pascalCase name}}Request, Get{{pascalCase name}}Reply } from "../server/protos/schema_pb";
import { {{pascalCase name}}ServiceErrorCodes } from "../service/error";

type gRPCServerUnaryCall<Request, Reply> = {
  call: grpc.ServerUnaryCall<Request>;
  callback: grpc.sendUnaryData<Reply>;
};

type gRPCServerWritableStream<Request> = {
  call: grpc.ServerWritableStream<Request>;
};

@injectable()
export class Controller {
  public static type: string = "Controller";

  async unaryCallMethod(
    { call, callback }: gRPCServerUnaryCall<Get{{pascalCase name}}Request, Get{{pascalCase name}}Reply>,
    { dao }: IContext
  ) {
    try {
    } catch (error) {
      callback(error, null);
    }
  }

  async serverWritableStreamMethod(
    { call }: gRPCServerWritableStream<Get{{pascalCase name}}Request>,
    { dao }: IContext
  ) {
    try {
    } catch (error) {}
  }
}
